(function(){"use strict";var e={7842:function(e,t,l){l.r(t);var a=l(636);function i(e,t,l,n=3,s=1){const o="...",r=a.Ay.Util.getLetterWidth(o,l);let c=0,d=e;const u=new RegExp("[一-龥]+");return e.split("").forEach(((p,f)=>{if(s>=n){if(c>t-r)return}else if(c>t)return;u.test(p)?c+=l:c+=a.Ay.Util.getLetterWidth(p,l),s>=n?c>t-r&&(d=`${e.substr(0,f)}${o}`):c>t&&(s+=1,d=`${e.substr(0,f)}\n${i(e.substr(f),t,l,n,s)}`)})),d}a.Ay.registerNode("card-node",{draw(e,t){const l=5,a="#5f95ff",n="#eff4ff",s=e.size[0],o=e.size[1],r=e.size2[0],c=e.size2[1],d=e.info,u=e.lifeList,p=e.curXmbh,f=15,h=10,m=5,x=5,b=t.addShape("rect",{attrs:{x:f,y:h,width:s,height:o,stroke:a,lineWidth:2,radius:l,fill:"#fff"},name:"main-box",draggable:!0});t.addShape("rect",{attrs:{x:f,y:h,width:s,height:o-c,stroke:a,lineWidth:2,fill:n,radius:[l,l,0,0]},name:"info-box",draggable:!0});const v={textBaseline:"top",fontSize:16,lineHeight:22,fill:"#000"},y=["项目编号:","项目名称:","项目类型:"],g=[h,h+(o-c)/x,h+3*(o-c)/x],k=[1,2,2];for(let _=0;_<3;_++){const e=Object.keys(d)[_];t.addShape("text",{attrs:Object.assign({text:y[_],x:f+m,y:g[_]+m,fontWeight:700},v),name:e+"-label"});const l=Object.assign({text:i(d[e],s-r-5,16,k[_]),x:f+r,y:g[_]+m},v);"xmbh"===String(e)&&d[e]===p&&(l.fill="#ff0000"),t.addShape("text",{attrs:l,name:e+"-value"})}return t.addShape("text",{attrs:{text:u[0],textBaseline:"top",textAlign:"center",x:f+s/4,y:h+o-c+m,fontSize:16,lineHeight:22,fill:"rgba(0,0,0, 1)"},name:"life1"}),t.addShape("text",{attrs:{text:u[1],textBaseline:"top",textAlign:"center",x:f+3*s/4,y:h+o-c+m,fontSize:16,lineHeight:22,fill:"rgba(0,0,0, 1)"},name:"life2"}),t.addShape("path",{attrs:{path:[["M",f+s/2,h+o-c],["L",f+s/2,h+o]],stroke:a,lineWidth:2},name:"line"}),b},setState(e,t,l){if("collapsed"===e){const e=l.get("group").find((e=>"collapse-icon"===e.get("name"))),i=t?a.Ay.Marker.expand:a.Ay.Marker.collapse;e.attr("symbol",i)}}})},8501:function(e,t,l){var a=l(6848),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("DCQ")],1)},n=[],s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("el-dialog",{attrs:{title:"流程图",visible:e.flowDialog,width:"90%",top:"5%"},on:{"update:visible":function(t){e.flowDialog=t}}},[t("div",{attrs:{id:"flow-title"}},[t("div",[t("strong",[e._v("项目编号: ")]),t("span",{staticStyle:{color:"#ff0000"}},[e._v(e._s(e.curXmxx.xmbh))])]),t("div",[t("strong",[e._v("项目名称: ")]),e._v(e._s(e.curXmxx.xmmc))]),t("div",[t("strong",[e._v("项目类型: ")]),e._v(e._s(e.curXmxx.xmlx))])]),t("div",{attrs:{id:"flow-chart"}})]),t("el-container",[t("el-header",[t("el-form",{staticClass:"searchForm",attrs:{inline:!0,model:e.searchbox}},[t("el-form-item",{attrs:{label:"开关按钮"}},[t("el-switch",{model:{value:e.searchbox.nolike,callback:function(t){e.$set(e.searchbox,"nolike",t)},expression:"searchbox.nolike"}})],1),e._l(e.checkedList,(function(l,a){return t("el-form-item",{key:a,attrs:{label:l.name}},["input"===l.type?[t("el-input",{style:l.style,attrs:{placeholder:l.placeholder,clearable:""},model:{value:l.modelValue,callback:function(t){e.$set(l,"modelValue",t)},expression:"item.modelValue"}})]:e._e(),"input2"===l.type?[t("el-input",{style:l.style,attrs:{placeholder:l.placeholder1,clearable:"",oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:l.modelValue1,callback:function(t){e.$set(l,"modelValue1",t)},expression:"item.modelValue1"}},[t("template",{slot:"append"},[e._v(e._s(l.suffix))])],2),e._v(" 至 "),t("el-input",{style:l.style,attrs:{placeholder:l.placeholder2,clearable:"",oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:l.modelValue2,callback:function(t){e.$set(l,"modelValue2",t)},expression:"item.modelValue2"}},[t("template",{slot:"append"},[e._v(e._s(l.suffix))])],2)]:e._e(),l.type.includes("select")?[t("el-select",{style:l.style,attrs:{multiple:"selects"===l.type,placeholder:l.placeholder,"collapse-tags":""},model:{value:l.modelValue,callback:function(t){e.$set(l,"modelValue",t)},expression:"item.modelValue"}},e._l(l.optionList,(function(e,l){return t("el-option",{key:l,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)]:e._e(),"datePicker"===l.type?[t("el-date-picker",{style:l.style,attrs:{placeholder:l.placeholder1,"value-format":"yyyy-MM-dd",clearable:""},model:{value:l.modelValue1,callback:function(t){e.$set(l,"modelValue1",t)},expression:"item.modelValue1"}}),e._v(" 至 "),t("el-date-picker",{style:l.style,attrs:{placeholder:l.placeholder2,"value-format":"yyyy-MM-dd",clearable:""},model:{value:l.modelValue2,callback:function(t){e.$set(l,"modelValue2",t)},expression:"item.modelValue2"}})]:e._e()],2)})),t("el-form-item",[t("el-popover",{attrs:{placement:"bottom-start",trigger:"hover"}},[t("div",{staticClass:"column"},[t("div",{staticClass:"row"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.operateBtn("all")}}},[e._v("全选")]),t("div",{staticStyle:{width:"1px",height:"14px",background:"#409eff",margin:"0 10px"}}),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.operateBtn("empty")}}},[e._v("清空")])],1),t("el-checkbox-group",{model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.allList,(function(l,a){return t("div",{key:a,staticClass:"row checkboxli"},[t("el-tooltip",{attrs:{disabled:l.tipsDisabled,effect:"light",placement:"right"}},[t("template",{slot:"content"},e._l(l.tipsText,(function(l,a){return t("div",{key:a},[e._v(" "+e._s(l)+" ")])})),0),t("el-checkbox",{attrs:{label:l,disabled:l.disabled}},[e._v(" "+e._s(l.name)+" ")])],2)],1)})),0)],1),t("el-button",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v("+ 筛选条件")])],1)],1)],2),t("el-form",{staticStyle:{"text-align":"left",position:"relative"},attrs:{inline:!0}},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.searchClick}},[e._v("查询")]),t("el-button",{attrs:{type:"primary"},on:{click:e.viewFlowChart}},[e._v("查看流程图")])],1)],1)],1),t("el-main",[e._v(" 查询参数："+e._s(e.queryPara)+" ")])],1)],1)},o=[],r=(l(4114),l(636));l(7842);var c={data(){return{searchbox:{nolike:!1},params:{},xmlxList:[{value:"",label:"全部"},{value:"1",label:"项目类型1"},{value:"2",label:"项目类型2"},{value:"3",label:"项目类型3"},{value:"4",label:"项目类型4"},{value:"5",label:"项目类型5"}],dxList:[{value:"",label:"全部"},{value:"1",label:"选项1"},{value:"2",label:"选项2"},{value:"3",label:"选项3"}],allList:[{name:"输入框",value:"xmbh",type:"input",modelValue:"",placeholder:"请输入项目编号",style:"width: 150px",default:!1,disabled:!1,optionList:[],tipsDisabled:!0,tipsText:[]},{name:"单选框-项目类型",value:"xmlx",type:"select",modelValue:"",placeholder:"请选择项目类型",style:"width: 400px",default:!1,disabled:!1,optionList:[],tipsDisabled:!0,tipsText:[]},{name:"范围框-日期",value1:"fzrqStart",value2:"fzrqEnd",type:"datePicker",modelValue1:"",modelValue2:"",placeholder1:"开始日期",placeholder2:"结束日期",style:"width: 150px",default:!1,disabled:!1,optionList:[],tipsDisabled:!0,tipsText:[]},{name:"范围框-面积",value1:"mjStart",value2:"mjEnd",type:"input2",modelValue1:"",modelValue2:"",placeholder1:"面积",placeholder2:"面积",suffix:"平方米",style:"width: 200px",default:!1,disabled:!0,optionList:[],tipsDisabled:!1,tipsText:["【项目类型】选择以下的，此选项开放：","项目类型1","项目类型2"]},{name:"单选框",value:"dx",type:"select",modelValue:"",placeholder:"请选择",style:"width: 150px",default:!1,disabled:!0,optionList:[],tipsDisabled:!1,tipsText:["【项目类型】选择以下的，此选项开放：","项目类型3"]}],defaultList:[],requiredList:[],checkedList:[],isOpenMj:!1,isOpenDx:!1,flowDialog:!1,curXmxx:{},queryPara:{}}},created(){this.allList.forEach((e=>{e.default&&(this.defaultList.push(e),this.checkedList.push(e)),"xmlx"===e.value?e.optionList=this.xmlxList:"dx"===e.value&&(e.optionList=this.dxList)})),this.fetchData()},watch:{checkedList:{deep:!0,handler(e){this.isOpenMj=!1,this.isOpenDx=!1,e.forEach((e=>{"xmlx"===e.value&&(["1","2"].includes(e.modelValue)?this.isOpenMj=!0:this.isOpenMj=!1,["3"].includes(e.modelValue)?this.isOpenDx=!0:this.isOpenDx=!1)}))}},isOpenMj(e){this.allList.forEach((t=>{["范围框-面积"].includes(t.name)&&(t.disabled=!e,t.tipsDisabled=e)})),e||(this.checkedList=this.checkedList.filter((e=>!["范围框-面积"].includes(e.name))))},isOpenDx(e){this.allList.forEach((t=>{["单选框"].includes(t.name)&&(t.disabled=!e,t.tipsDisabled=e)})),e||(this.checkedList=this.checkedList.filter((e=>!["单选框"].includes(e.name))))}},methods:{searchClick(){this.params={},this.checkedList.forEach((e=>{null!=e.value1&&""!==e.value1?(this.params[e.value1]=e.modelValue1,this.params[e.value2]=e.modelValue2):this.params[e.value]=e.modelValue})),this.fetchData()},fetchData(){this.queryPara=Object.assign({},this.searchbox,this.params)},operateBtn(e){this.checkedList="all"===e?this.allList.filter((e=>!e.disabled)):"empty"===e?[]:this.defaultList},viewFlowChart(){const e={data:{data:{curXmxx:{xmlx:"项目类型1",xmmc:"项目名称1[续办]",xmbh:"111111"},lifecycleFlow:{lifeList:["[新建]\n2021-11-09 10:33:43","[办结归档]\n2021-11-23 10:15:33"],children:[{lifeList:["[续办]\n2024-10-14 10:58:39","[办结归档]\n2024-10-14 15:27:14"],id:"222222",info:{xmbh:"222222",xmmc:"项目名称222222[续办]",xmlx:"项目类型1"}}],id:"111111",info:{xmbh:"111111",xmmc:"项目名称111111",xmlx:"项目类型2"}}}}},t=e.data.data;this.curXmxx=t.curXmxx;const l=t.lifecycleFlow,a=this.curXmxx.xmbh;this.flowDialog=!0;const i=setInterval((()=>{const e=document.getElementById("flow-chart");let t=null;if(null!==e){e.innerText="",window.clearInterval(i);const l=360,n=155,s=80,o=45,c=l+100;t=new r.Ay.TreeGraph({container:e,width:e.scrollWidth,height:e.scrollHeight,modes:{default:[{type:"drag-canvas",allowDragOnItem:!0},"zoom-canvas"]},defaultNode:{type:"card-node",size:[l,n],size2:[s,o],curXmbh:a,anchorPoints:[[1,.5],[0,.5]]},defaultEdge:{type:"cubic-horizontal",style:{endArrow:!0,stroke:"skyblue",lineWidth:2}},layout:{type:"indented",direction:"LR",indent:c,dropCap:!1,getHeight:()=>-36+n+50}})}null!=t&&(t.data(l),t.render(),t.fitView(0,{onlyOutOfViewPort:!0}))}),100)}}},d=c,u=l(1656),p=(0,u.A)(d,s,o,!1,null,"bf671096",null),f=p.exports,h={components:{DCQ:f}},m=h,x=(0,u.A)(m,i,n,!1,null,null,null),b=x.exports,v=l(9143),y=l.n(v);a["default"].config.productionTip=!1,a["default"].use(y()),new a["default"]({render:e=>e(b)}).$mount("#app")}},t={};function l(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=e,function(){l.amdO={}}(),function(){var e=[];l.O=function(t,a,i,n){if(!a){var s=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],n=e[d][2];for(var o=!0,r=0;r<a.length;r++)(!1&n||s>=n)&&Object.keys(l.O).every((function(e){return l.O[e](a[r])}))?a.splice(r--,1):(o=!1,n<s&&(s=n));if(o){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,i,n]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,s=a[0],o=a[1],r=a[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(i in o)l.o(o,i)&&(l.m[i]=o[i]);if(r)var d=r(l)}for(t&&t(a);c<s.length;c++)n=s[c],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(d)},a=self["webpackChunkdynamic_condition_query"]=self["webpackChunkdynamic_condition_query"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=l.O(void 0,[504],(function(){return l(8501)}));a=l.O(a)})();
//# sourceMappingURL=app.ef35f8e5.js.map